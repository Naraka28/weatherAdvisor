<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WeatherAdvisor</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap"
      rel="stylesheet"
    />

    <style type="text/tailwindcss">
      @theme {
        --color-cream: #fffbde;
        --color-sky: #91c8e4;
        --color-steel: #749bc2;
        --color-ocean: #4682a9;
        --color-deep: #2d4a5e;
        --color-page: #e8e5df;
        --color-surface: #f0ede7;
        --color-mist: #daeef8;
        --font-sans: "DM Sans", sans-serif;
        --font-display: "Instrument Serif", serif;
      }

      * {
        font-family: var(--font-sans);
      }
      .font-display {
        font-family: var(--font-display);
      }

      body {
        background-color: var(--color-page);
      }

      /* Utilidad para scrollbar */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      .sidebar {
        background-color: var(--color-surface);
        border-right: 1px solid rgba(0, 0, 0, 0.07);
      }

      .site-header {
        background-color: color-mix(
          in srgb,
          var(--color-surface) 85%,
          transparent
        );
        backdrop-filter: blur(12px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.07);
      }

      .search-wrap:focus-within {
        border-color: var(--color-steel) !important;
        box-shadow: 0 0 0 3px
          color-mix(in srgb, var(--color-steel) 20%, transparent);
      }

      .city-btn:hover {
        background-color: rgba(0, 0, 0, 0.06);
      }

      #suggestions button:not(:last-child) {
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }
    </style>
  </head>

  <body class="flex flex-col lg:flex-row relative min-h-screen">
    <div
      id="sidebarOverlay"
      class="fixed inset-0 bg-black/20 backdrop-blur-sm z-40 hidden lg:hidden transition-opacity"
    ></div>

    <aside
      id="sidebar"
      class="sidebar w-64 shrink-0 flex flex-col h-screen fixed inset-y-0 left-0 z-50 -translate-x-full transition-transform duration-300 ease-in-out lg:translate-x-0 lg:sticky lg:top-0"
    >
      <div
        class="px-5 pt-6 pb-4 border-b border-black/7 flex justify-between items-center"
      >
        <div class="flex items-center gap-2.5">
          <span class="font-display text-lg italic text-ocean"
            >WeatherAdvisor</span
          >
        </div>
        <button id="closeSidebar" class="lg:hidden text-stone-400">
          <i class="fa-solid fa-xmark text-xl"></i>
        </button>
      </div>

      <div class="flex-1 overflow-y-auto no-scrollbar px-3 py-5 space-y-5">
        <section>
          <div class="flex items-center gap-2 px-2 mb-2">
            <svg
              class="w-3 h-3 text-steel shrink-0"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="9" />
              <path d="M12 7v5l3 3" />
            </svg>
            <span
              class="text-[10px] font-medium uppercase tracking-widest text-steel"
              >Recientes</span
            >
          </div>
          <div id="recentCities" class="space-y-0.5"></div>
          <p id="recentEmpty" class="hidden text-xs px-2 py-1 text-stone-400">
            Sin búsquedas recientes
          </p>
        </section>

        <div class="border-t border-black/7"></div>

        <section>
          <div class="flex items-center justify-between px-2 mb-2">
            <div class="flex items-center gap-2">
              <svg
                class="w-3 h-3 text-steel shrink-0"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"
                />
              </svg>
              <span
                class="text-[10px] font-medium uppercase tracking-widest text-steel"
                >Favoritos</span
              >
            </div>
            <button
              id="clearCities"
              class="text-[10px] font-medium text-stone-400 hover:text-red-400 transition-colors"
            >
              Limpiar
            </button>
          </div>
          <div id="savedCities" class="space-y-0.5"></div>
          <p id="favEmpty" class="hidden text-xs px-2 py-1 text-stone-400">
            Sin favoritos guardados
          </p>
        </section>
      </div>

      <div class="px-5 py-4 border-t border-black/7">
        <a
          href="https://openweathermap.org/"
          target="_blank"
          class="flex items-center gap-1.5 text-[11px] text-stone-400 hover:text-ocean transition-colors"
        >
          <svg
            class="w-3 h-3"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 2a10 10 0 100 20A10 10 0 0012 2zm0 0c2.5 2.5 4 6 4 10s-1.5 7.5-4 10M2 12h20"
            />
          </svg>
          OpenWeather.org
        </a>
      </div>
    </aside>

    <div class="flex-1 flex flex-col min-h-screen relative z-10">
      <header class="site-header sticky top-0 z-40">
        <nav
          class="max-w-5xl mx-auto px-4 lg:px-6 py-3 flex items-center gap-3"
        >
          <button
            id="openSidebar"
            class="lg:hidden p-2 text-ocean hover:bg-black/5 rounded-xl transition-colors"
          >
            <i class="fa-solid fa-bars-staggered text-xl"></i>
          </button>

          <div id="searchForm" class="relative flex-1">
            <div
              class="search-wrap flex items-center gap-2.5 bg-page border border-stone-300/60 rounded-2xl px-4 py-2.5 shadow-sm transition-all duration-200"
            >
              <svg
                class="w-4 h-4 text-stone-400 shrink-0"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.35-4.35" />
              </svg>
              <input
                id="searchInput"
                type="text"
                placeholder="Buscar ciudad..."
                class="flex-1 bg-transparent text-sm text-deep placeholder:text-stone-400 focus:outline-none"
                autocomplete="off"
              />
              <span id="searchSpinner" class="hidden">
                <svg
                  class="w-3.5 h-3.5 text-steel animate-spin"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  />
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8v8z"
                  />
                </svg>
              </span>
            </div>
            <div
              id="suggestions"
              class="absolute top-[calc(100%+6px)] left-0 right-0 bg-page border border-stone-200 rounded-2xl shadow-lg overflow-hidden hidden z-50"
            ></div>
          </div>
        </nav>
      </header>

      <div class="max-w-5xl mx-auto w-full px-4 lg:px-6 mt-4">
        <span
          id="errorMessage"
          class="hidden text-sm text-red-500 bg-red-50 border border-red-100 px-4 py-2.5 rounded-xl block"
        ></span>
      </div>

      <main class="flex-1 w-full px-4 py-6 flex flex-col items-center">
        <div
          id="contentWrapper"
          class="hidden flex flex-col gap-6 w-full max-w-5xl"
        >
          <div
            id="weatherGrid"
            class="flex flex-col lg:flex-row gap-6 items-stretch w-full"
          >
            <article id="forecast" class="flex flex-col shrink-0"></article>
            <article
              id="dayForecast"
              class="flex flex-col flex-1 min-w-0"
            ></article>
          </div>
          <article id="recommendations" class="w-full"></article>
        </div>

        <div
          id="emptyState"
          class="flex flex-col items-center justify-center py-20 lg:py-28 px-6 text-center"
        >
          <div
            class="w-20 h-20 rounded-3xl bg-mist flex items-center justify-center mb-5 shadow-sm"
          >
            <svg
              class="w-10 h-10 text-steel"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              viewBox="0 0 24 24"
            >
              <path
                d="M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.502 4.502 0 002.25 15z"
              />
            </svg>
          </div>
          <p class="font-display italic text-2xl lg:text-3xl text-ocean mb-1.5">
            ¿Qué clima hace hoy?
          </p>
          <p class="text-sm text-stone-400">
            Busca una ciudad para ver el pronóstico
          </p>
        </div>
      </main>
    </div>

    <script type="module" src="main.js"></script>
    <script>
      const sidebar = document.getElementById("sidebar");
      const openBtn = document.getElementById("openSidebar");
      const closeBtn = document.getElementById("closeSidebar");
      const overlay = document.getElementById("sidebarOverlay");

      function toggleMenu() {
        sidebar.classList.toggle("-translate-x-full");
        overlay.classList.toggle("hidden");
        document.body.classList.toggle("overflow-hidden");
      }

      openBtn.addEventListener("click", toggleMenu);
      closeBtn.addEventListener("click", toggleMenu);
      overlay.addEventListener("click", toggleMenu);

      document.addEventListener("click", (e) => {
        if (window.innerWidth < 1024 && e.target.closest(".city-btn")) {
          toggleMenu();
        }
      });

      const obs = new MutationObserver(() => {
        const f = document.querySelector("#forecast");
        const e = document.querySelector("#emptyState");
        const w = document.querySelector("#contentWrapper");
        if (f && f.innerHTML.trim()) {
          e.classList.add("hidden");
          w.classList.remove("hidden");
        }
      });
      obs.observe(document.body, { childList: true, subtree: true });
    </script>
  </body>
</html>
